(this["webpackJsonp@ibm-watson/speech-to-text-code-pattern"]=this["webpackJsonp@ibm-watson/speech-to-text-code-pattern"]||[]).push([[0],{294:function(e,a,t){e.exports=t(496)},299:function(e,a,t){},307:function(e,a){},309:function(e,a){},317:function(e,a){},319:function(e,a){},353:function(e,a){},355:function(e,a){},360:function(e,a){},362:function(e,a){},496:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(281),i=t.n(o),s=(t(299),t(503)),c=function(e){var a=e.description,t=e.links,n=e.title;return r.a.createElement(s.a,{className:"header"},r.a.createElement("div",{className:"title-container"},r.a.createElement("h2",{className:"header-title"},n),r.a.createElement("p",null,a)),r.a.createElement("div",{className:"link-container"},r.a.createElement("div",{className:"link-wrapper"},t.map((function(e){return e})))))};c.defaultProps={description:"",links:[],title:""};var l=c,u=t(4),d=t(6),p=t.n(d),m=t(19),f=t(13),y=t(168),v=t.n(y),g=t(282),b=t.n(g),S=t(504),h=t(508),w=t(505),E=t(512),k=t(283),C=t.n(k),x=t(63),O=function(e){var a=e.isRecording,t=e.isSamplePlaying,o=(e.isUploadPlaying,e.keywordText),i=e.modelName,s=e.onError,c=(e.onStartPlayingFileUpload,e.onStopPlayingFileUpload,e.onStartPlayingSample),l=e.onStopPlayingSample,d=e.onStartRecording,y=e.onStopRecording,v=e.useSpeakerLabels,g=Object(n.useState)([]),b=Object(f.a)(g,2),S=b[0],h=b[1];Object(n.useEffect)((function(){var e=[];o.length>0&&(e=o.split(",").map((function(e){return e.trim()}))),h(e)}),[o]);var w=x.find((function(e){return e.name===i})),k=w?w.filename:null,O=function(){var e=Object(m.a)(p.a.mark((function e(){var a,t,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C()("/api/auth");case 2:return a=e.sent,e.next=5,a.json();case 5:if(t=e.sent,a.ok){e.next=9;break}return s(t),e.abrupt("return",{error:t});case 9:return n={},r=S.map((function(e){return e.toLowerCase()})),n=Object(u.a)(Object(u.a)({},n),{},{url:t.url||void 0,accessToken:t.accessToken,format:!0,keywords:S.length>0?r:void 0,keywordsThreshold:S.length>0?.01:void 0,model:i,objectMode:!0,play:!0,realtime:!0,resultsBySpeaker:v,speakerlessInterim:!0,timestamps:!0}),e.abrupt("return",n);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(m.a)(p.a.mark((function e(){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O();case 2:return a=e.sent,e.abrupt("return",Object(u.a)(Object(u.a)({},a),{},{file:"audio/".concat(k)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(m.a)(p.a.mark((function e(){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O();case 2:return a=e.sent,e.abrupt("return",Object(u.a)(Object(u.a)({},a),{},{resultsBySpeaker:!1}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"submit-container"},t?r.a.createElement(E.a,{className:"submit-button",kind:"tertiary",onClick:l},"Stop audio sample"):r.a.createElement(E.a,{className:"submit-button",disabled:!i,kind:"tertiary",onClick:Object(m.a)(p.a.mark((function e(){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P();case 2:(a=e.sent).error||c(a);case 4:case"end":return e.stop()}}),e)})))},"Play audio sample"),a?r.a.createElement(E.a,{className:"submit-button",kind:"tertiary",onClick:y},"Stop recording"):r.a.createElement(E.a,{className:"submit-button",disabled:!i,kind:"tertiary",onClick:Object(m.a)(p.a.mark((function e(){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:(a=e.sent).error||d(a);case 4:case"end":return e.stop()}}),e)})))},"Record your own"))};O.defaultProps={isRecording:!1,isSamplePlaying:!1,isUploadPlaying:!1,keywordText:"",modelName:null,onError:function(){},onStartPlayingFileUpload:function(){},onStopPlayingFileUpload:function(){},onStartPlayingSample:function(){},onStopPlayingSample:function(){},onStartRecording:function(){},onStopRecording:function(){},useSpeakerLabels:!1};var P=O,T=function(e){var a=e.isRecording,t=e.isSamplePlaying,o=e.isUploadPlaying,i=e.onError,c=e.onSelectNewModel,l=e.onStartPlayingFileUpload,u=e.onStopPlayingFileUpload,d=e.onStartPlayingSample,p=e.onStopPlayingSample,m=e.onStartRecording,y=e.onStopRecording,v=x.map((function(e){return{id:e.name,label:e.description,supportsSpeakerLabels:e.supported_features.speaker_labels}})),g=Object(n.useState)(v[0]),b=Object(f.a)(g,2),E=b[0],k=b[1],C=Object(n.useState)(x[0].keywords),O=Object(f.a)(C,2),T=O[0],A=O[1],_=Object(n.useState)(!1),j=Object(f.a)(_,2),N=j[0],I=j[1];return r.a.createElement(s.a,{className:"control-container"},r.a.createElement("h3",{className:"container-title"},"Audio"),r.a.createElement(S.a,{legendText:"Language model"},r.a.createElement(h.a,{id:"language-model-dropdown",label:"Select a language model",onChange:function(e){k(e.selectedItem);var a=x.find((function(a){return a.name===e.selectedItem.id})).keywords;A(a),N&&!e.selectedItem.supportsSpeakerLabels&&I(!1),c()},items:v,selectedItem:E&&E.label,defaultText:"Select a language model",ariaLabel:"Language selection dropdown",light:!0})),r.a.createElement(S.a,{legendText:"Keywords to spot"},r.a.createElement(w.a,{id:"custom-keyword-input",labelText:"Custom language keyword input",placeholder:"Enter custom language keywords",hideLabel:!0,invalidText:"Invalid keywords provided",value:T,onChange:function(e){A(e.target.value)},light:!0})),r.a.createElement(P,{isRecording:a,isSamplePlaying:t,isUploadPlaying:o,keywordText:T,modelName:E&&E.id,onError:i,onStartPlayingFileUpload:l,onStopPlayingFileUpload:u,onStartPlayingSample:d,onStopPlayingSample:p,onStartRecording:m,onStopRecording:y,useSpeakerLabels:N}))};T.defaultProps={isRecording:!1,isSamplePlaying:!1,isUploadPlaying:!1,onError:function(){},onSelectNewModel:function(){},onStartPlayingFileUpload:function(){},onStopPlayingFileUpload:function(){},onStartPlayingSample:function(){},onStopPlayingSample:function(){},onStartRecording:function(){},onStopRecording:function(){}};var A=T,_=t(506),j=t(509),N=t(507),I=t(498),R=t(284),D=t(285),U=t(111),B=t(289),W=t(288),F=function(e){Object(B.a)(t,e);var a=Object(W.a)(t);function t(e){var n;return Object(R.a)(this,t),(n=a.call(this,e)).audioWaveCanvasRef=r.a.createRef(),n.audioWaveCanvasCtx=null,n.animationFrameId=null,n.draw=n.draw.bind(Object(U.a)(n)),n.state={startingTimestamp:0,microphoneData:new Uint8Array(1024)},n}return Object(D.a)(t,[{key:"componentDidMount",value:function(){this.audioWaveCanvasCtx=this.audioWaveCanvasRef.current.getContext("2d"),this.audioWaveCanvasCtx.lineCap="round",this.initializeCanvasDimensions()}},{key:"componentDidUpdate",value:function(e){Object(f.a)(e.data,1)[0]!==Object(f.a)(this.props.data,1)[0]&&this.drawInitialAudioWave(),!1===e.isTranscribing&&!0===this.props.isTranscribing?(this.setStartingTimestamp(),this.draw()):!0===e.isTranscribing&&!1===this.props.isTranscribing&&this.stopDrawing()}},{key:"setStartingTimestamp",value:function(){this.setState({startingTimestamp:Date.now()})}},{key:"initializeCanvasDimensions",value:function(){var e=this.audioWaveCanvasRef.current,a=this.props.audioWaveContainerRef.current;e.width=a.clientWidth,e.height=100}},{key:"drawInitialAudioWave",value:function(){this.resetCanvasForNewFrame(),this.drawEmptyDataPoints()}},{key:"drawEmptyDataPoints",value:function(){var e=this;this.props.data.forEach((function(a,t){e.audioWaveCanvasCtx.beginPath(),e.audioWaveCanvasCtx.fillStyle="rgba(0, 98, 255, 0.5)",e.audioWaveCanvasCtx.fillRect(2*t,50,1,50*a),e.audioWaveCanvasCtx.fillRect(2*t,50,1,-50*a),e.audioWaveCanvasCtx.stroke(),e.audioWaveCanvasCtx.closePath()}))}},{key:"drawMicrophoneDataPoints",value:function(){var e=this;this.props.audioAnalyzer.getByteFrequencyData(this.state.microphoneData);var a=this.state.microphoneData;[].slice.call(a).map((function(e){return e/255})).forEach((function(a,t){e.audioWaveCanvasCtx.beginPath(),e.audioWaveCanvasCtx.fillStyle="rgba(0, 98, 255, 1)",e.audioWaveCanvasCtx.fillRect(2*t,50,1,50*a),e.audioWaveCanvasCtx.fillRect(2*t,50,1,-50*a),e.audioWaveCanvasCtx.stroke(),e.audioWaveCanvasCtx.closePath()}))}},{key:"drawAudioDataPoints",value:function(){var e=this,a=this.props,t=a.data,n=a.duration,r=(Date.now()-this.state.startingTimestamp)/n,o=t.length*r,i=Math.floor(o),s=o-i;s>1&&(s=1),s<.5&&(s=.5),t.forEach((function(a,t){e.audioWaveCanvasCtx.beginPath();var n="rgba(0, 98, 255, 1)";t>i&&(n="rgba(0, 98, 255, 0.5)"),t-1===i&&(n="rgba(0, 98, 255, ".concat(s.toFixed(2),")")),e.audioWaveCanvasCtx.fillStyle=n,e.audioWaveCanvasCtx.fillRect(2*t,50,1,50*a),e.audioWaveCanvasCtx.fillRect(2*t,50,1,-50*a),e.audioWaveCanvasCtx.stroke(),e.audioWaveCanvasCtx.closePath()}))}},{key:"draw",value:function(){this.resetCanvasForNewFrame(),this.props.audioSource&&"microphone"===this.props.audioSource?this.drawMicrophoneDataPoints():this.drawAudioDataPoints(),this.animationFrameId=requestAnimationFrame(this.draw)}},{key:"resetCanvasForNewFrame",value:function(){var e=this.audioWaveCanvasRef.current;this.audioWaveCanvasCtx.clearRect(0,0,e.width,e.height)}},{key:"stopDrawing",value:function(){this.animationFrameId&&cancelAnimationFrame(this.animationFrameId)}},{key:"render",value:function(){return r.a.createElement("div",{ref:this.props.audioWaveContainerRef,className:"audiowave"},r.a.createElement("canvas",{ref:this.audioWaveCanvasRef}))}}]),t}(r.a.Component);F.defaultProps={audioSource:null,audioAnalyzer:null};var L=F,M=t(510),z=function(e){var a=e.confidence,t=e.startTime,n=e.endTime;return r.a.createElement("div",{className:"keyword-tooltip"},r.a.createElement("p",null,"Confidence: ",a),r.a.createElement("p",null,t,"s - ",n,"s"))},G=t(75),Y=function(e,a,t){var n=[];if(a.length>0){var r=function(e){var a=[];e.forEach((function(e){a=[].concat(Object(G.a)(a),Object(G.a)(Object.keys(e)))}));var t=a.map((function(e,t){return t!==a.length-1?"".concat(e,"|"):e})).reduce((function(e,a){return e+a}),"");return new RegExp("(".concat(t,")(?!')"),"gi")}(a);n=e.split(r)}if(0===n.length)return[{text:e,type:"normal"}];var o={};return n.map((function(e,n){var r=e.toLowerCase();if(n%2===0)return{text:e,type:"normal"};var i=a[t]&&a[t][r],s=0;o[r]?(s=o[r],o[r]+=1):o[r]=1;var c=i&&i[s];return c?{text:e,type:"keyword",startTime:c.start_time,endTime:c.end_time,confidence:c.confidence}:{}}))},q=function(e){var a=e.keywordInfo,t=e.transcriptArray;return r.a.createElement("div",{className:"transcript-box"},t.map((function(e,t){var n=e.speaker,o=e.text,i=Y(o,a,t);return r.a.createElement("div",{key:"transcript-".concat(t)},null!==n&&r.a.createElement("span",{className:"speaker-label--".concat(n)},"Speaker ".concat(n,": ")),i.map((function(e,a){return e?"normal"===e.type?r.a.createElement("span",{key:"transcript-text-".concat(t,"-").concat(a)},"".concat(e.text)):"keyword"===e.type?r.a.createElement(M.a,{align:"center",direction:"top",key:"transcript-keyword-".concat(t,"-").concat(a),tooltipText:r.a.createElement(z,{confidence:e.confidence,startTime:e.startTime,endTime:e.endTime}),triggerClassName:"keyword-info-trigger"},e.text):null:null})))})))};q.defaultProps={keywordInfo:[],transcriptArray:[]};var Z=q,J=t(170),K=function(e){var a=e.audioAnalyzer,t=e.audioDataArray,n=e.audioDuration,o=e.audioSource,i=e.audioWaveContainerRef,c=e.isTranscribing,l=e.keywordInfo,u=e.transcriptArray,d={className:"some-class",onSubmit:function(e){e.preventDefault(),Object(J.action)("FormSubmitted")(e)}},p={className:"some-class"},m={className:"some-class",legendText:"Responsive?"};return r.a.createElement(s.a,{className:"output-container"},r.a.createElement("h3",{className:"container-title"},"Case"),r.a.createElement("h4",{className:"container-title"},"Vitals"),r.a.createElement("p",{className:"container-title"},"Fill in the form fields provided according to recorded vitals. If you prefer, you can dictate these vitals."),r.a.createElement(_.a,d,r.a.createElement(S.a,{legendText:"Audio"},r.a.createElement(L,{audioWaveContainerRef:i,data:t,duration:n,isTranscribing:c,audioSource:o,audioAnalyzer:a})),r.a.createElement(j.a,{className:"input",id:"pulse",labelText:"Pulse"}),r.a.createElement(j.a,{className:"input",id:"bloodPressure",labelText:"Blood Pressure"}),r.a.createElement(j.a,{className:"input",id:"spo2",labelText:"SpO2"}),r.a.createElement(j.a,{className:"input",id:"temperature",labelText:"Temperature"}),r.a.createElement(S.a,m,r.a.createElement(N.a,{onChange:Object(J.action)("onChange"),name:"radio-button-group",defaultSelected:"default-selected"},r.a.createElement(I.a,Object.assign({value:"standard",id:"radio-1",labelText:"Yes"},p)),r.a.createElement(I.a,Object.assign({value:"default-selected",labelText:"No",id:"radio-2"},p)))),r.a.createElement(S.a,{legendText:"Transcript"},r.a.createElement(Z,{keywordInfo:l,transcriptArray:u})),r.a.createElement(E.a,{type:"submit",className:"submit"},"SUBMIT")))};K.defaultProps={audioDataArray:[],audioDuration:0,audioSource:"",isTranscribing:!1,keywordInfo:[],transcriptArray:[]};var V=K,H=t(511),X=function(e){var a=e.caption,t=e.children,o=e.className,i=e.hideAfterFirstDisplay,s=e.hideCloseButton,c=e.iconDescription,l=e.kind,u=e.lowContrast,d=e.onCloseButtonClick,p=e.role,m=e.subtitle,y=e.timeout,v=e.title,g=Object(n.useState)(),b=Object(f.a)(g,2),S=b[0],h=b[1],w=Object(n.useState)(!1),E=Object(f.a)(w,2),k=E[0],C=E[1];return Object(n.useEffect)((function(){h(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15))}),[]),Object(n.useEffect)((function(){var e=document.querySelector(".custom-toast-".concat(S));e&&(e.className+="enter")}),[S]),Object(n.useEffect)((function(){i&&void 0!==typeof window&&void 0!==typeof window.localStorage&&"true"===window.localStorage.getItem("notificationHasBeenSeen")&&C(!0)}),[i]),k?null:r.a.createElement(H.a,{caption:a,className:"custom-toast-".concat(S," ").concat(o),hideCloseButton:s,iconDescription:c,kind:l,lowContrast:u,onCloseButtonClick:function(){i&&void 0!==typeof window&&void 0!==typeof window.localStorage&&window.localStorage.setItem("notificationHasBeenSeen","true"),d()},role:p,subtitle:m,timeout:y,title:v},t)};X.defaultProps={caption:"",children:null,className:"",hideAfterFirstDisplay:!0,hideCloseButton:!1,iconDescription:"closes notification",kind:"error",lowContrast:!1,onCloseButtonClick:function(){},role:"alert",subtitle:"",timeout:0,title:""};var $=X,Q="SET_AUDIO_ANALYZER",ee="SET_AUDIO_CONTEXT",ae="SET_AUDIO_SOURCE",te="SET_AUDIO_STREAM",ne="SET_AUDIO_VISUALIZATION_DATA",re="SET_ERROR",oe="SET_SPEAKER_LABELS",ie="SET_IS_RECORDING",se="SET_IS_SAMPLE_PLAYING",ce="SET_IS_TRANSCRIBING",le="SET_IS_UPLOAD_PLAYING",ue="UPDATE_RESULTS",de={audioAnalyzer:{},audioContext:null,audioDataArray:[],audioDurationInMs:0,audioSource:"",audioStream:null,error:null,isRecording:!1,isSamplePlaying:!1,isTranscribing:!1,isUploadPlaying:!1,keywordInfo:[],speakerLabels:[],transcript:[]},pe=function(e,a){switch(a.type){case"SET_AUDIO_ANALYZER":return Object(u.a)(Object(u.a)({},e),{},{audioAnalyzer:a.audioAnalyzer});case"SET_AUDIO_CONTEXT":return Object(u.a)(Object(u.a)({},e),{},{audioContext:a.audioContext});case"SET_AUDIO_SOURCE":return Object(u.a)(Object(u.a)({},e),{},{audioSource:a.audioSource});case"SET_AUDIO_STREAM":return Object(u.a)(Object(u.a)({},e),{},{audioStream:a.audioStream});case"SET_AUDIO_VISUALIZATION_DATA":return Object(u.a)(Object(u.a)({},e),{},{audioDataArray:a.audioDataArray,audioDurationInMs:a.audioDurationInMs});case"SET_ERROR":return Object(u.a)(Object(u.a)({},e),{},{error:a.error});case"SET_IS_RECORDING":return Object(u.a)(Object(u.a)({},e),{},{isRecording:a.isRecording});case"SET_IS_SAMPLE_PLAYING":return Object(u.a)(Object(u.a)({},e),{},{isSamplePlaying:a.isSamplePlaying});case"SET_IS_TRANSCRIBING":return Object(u.a)(Object(u.a)({},e),{},{isTranscribing:a.isTranscribing});case"SET_IS_UPLOAD_PLAYING":return Object(u.a)(Object(u.a)({},e),{},{isUploadPlaying:a.isUploadPlaying});case"SET_SPEAKER_LABELS":return Object(u.a)(Object(u.a)({},e),{},{speakerLabels:a.speakerLabels});case"UPDATE_RESULTS":var t=Object(G.a)(e.transcript);return 0===a.resultIndex?t=a.transcript:t[a.resultIndex]=a.transcript[0],Object(u.a)(Object(u.a)({},e),{},{keywordInfo:a.keywordInfo,transcript:t});default:throw new Error}},me=2,fe=function(e){var a=new FileReader;return new Promise((function(t,n){a.onload=function(){var e=a.result;t(e)},a.onerror=function(){a.abort(),n(new Error("failed to process file"))},a.readAsArrayBuffer(e)}))},ye=function(){var e=Object(m.a)(p.a.mark((function e(a,t,n){var r,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe(a);case 2:return r=e.sent,o=new Uint8Array(r.slice(0)),e.abrupt("return",new Promise((function(e,a){t.decodeAudioData(r,(function(a){for(var t=a.duration,r=n-2*me,i=Math.floor(r/2),s=o.length/i,c=[],l=1;l<i;l+=1){var u=l-1;u<0&&(u=0),c.push(o.slice(u*s,l*s))}var d=c.map((function(e){return e.reduce((function(e,a){return e+a}))/(255*s)}));e({duration:t,reducedFloatArray:d})}),(function(){a(new Error("failed to chunk audio"))}))})));case 5:case"end":return e.stop()}}),e)})));return function(a,t,n){return e.apply(this,arguments)}}(),ve=function(e,a){return{title:e,description:a}},ge=function(){var e=Object(n.useReducer)(pe,de),a=Object(f.a)(e,2),t=a[0],o=a[1],i=Object(n.useRef)(null);Object(n.useEffect)((function(){var e=new(window.AudioContext||window.webkitAudioContext),a=e.createAnalyser();o({audioAnalyzer:a,type:Q}),o({audioContext:e,type:ee})}),[]);var s=function(e){if(e.speaker_labels)o({speakerLabels:e.speaker_labels,type:oe});else{var a=function(e){var a=e.results,t=e.result_index,n=[],r=[],o=!1;return a.forEach((function(e){var a=e.final,t=null,i=null,s=null;a?(t=e.alternatives,i=e.speaker,s=e.keywords_result):(t=e.alternatives,i=e.speaker);var c=t,l=Object(f.a)(c,1)[0].transcript;void 0===i&&(i=null),r.push({final:a,speaker:i,text:l}),o=a,s&&n.push(s)})),{transcript:r,keywordInfo:n,resultIndex:t,final:o}}(e),t=a.transcript,n=a.keywordInfo,r=a.resultIndex;o({keywordInfo:n,resultIndex:r,transcript:t,type:ue})}},c=function(){t.audioStream&&t.audioStream.stop(),o({isTranscribing:!1,type:ce}),o({isUploadPlaying:!1,type:le}),o({isSamplePlaying:!1,type:se}),o({isRecording:!1,type:ie})},l=function(){var e=Object(m.a)(p.a.mark((function e(a){var n,r,s,c,l,u,d,m;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,i&&i.current&&i.current.clientWidth&&(n=i.current.clientWidth),r=n||300,s=a instanceof File,e.prev=4,c=null,!s){e.next=10;break}c=a,e.next=16;break;case 10:return e.next=12,fetch(a);case 12:return l=e.sent,e.next=15,l.blob();case 15:c=e.sent;case 16:return e.next=18,ye(c,t.audioContext,r);case 18:u=e.sent,d=u.reducedFloatArray,m=u.duration,o({audioDataArray:d,audioDurationInMs:1e3*m,type:ne}),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(4),o({error:ve("File upload error","There was a problem trying to read the file."),type:re});case 27:case"end":return e.stop()}}),e,null,[[4,24]])})));return function(a){return e.apply(this,arguments)}}(),d=function(){var e=Object(m.a)(p.a.mark((function e(a){var n,r,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,navigator.mediaDevices.getUserMedia({video:!1,audio:!0});case 4:n=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),o({error:ve("No microphone detected","Cannot transcribe from microphone."),type:re});case 10:return r=b()(Object(u.a)(Object(u.a)({},a),{},{mediaStream:n,keepMic:!0})),n&&((i=t.audioAnalyzer).fttSize=2048,o({audioAnalyzer:i,type:Q}),t.audioContext.createMediaStreamSource(n).connect(t.audioAnalyzer)),e.abrupt("return",r);case 13:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(a){return e.apply(this,arguments)}}(),y=function(e){e.on("data",(function(e){s(e)})).on("end",(function(){c()})).on("error",(function(){o({error:ve("Audio transcription error","There was an error trying to read the audio data. Please try again."),type:re}),c()})),o({isTranscribing:!0,type:ce})},g=function(){t.audioStream&&(t.audioStream.stop(),t.audioStream.removeAllListeners(),t.audioStream.recognizeStream.removeAllListeners()),t.audioContext&&"suspended"===t.audioContext.state&&t.audioContext.resume()},S=function(){var e=Object(m.a)(p.a.mark((function e(a){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(),t=v()(a),e.next=4,l(a.file);case 4:o({isUploadPlaying:!0,type:le}),o({isSamplePlaying:!1,type:se}),o({isRecording:!1,type:ie}),o({audioSource:"upload",type:ae}),o({audioStream:t,type:te}),y(t);case 10:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),h=function(){var e=Object(m.a)(p.a.mark((function e(a){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(),t=v()(a),e.next=4,l(a.file);case 4:o({isSamplePlaying:!0,type:se}),o({isUploadPlaying:!1,type:le}),o({isRecording:!1,type:ie}),o({audioSource:"sample",type:ae}),o({audioStream:t,type:te}),y(t);case 10:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),w=function(){var e=Object(m.a)(p.a.mark((function e(a){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(),e.next=3,d(a);case 3:t=e.sent,o({isRecording:!0,type:ie}),o({isSamplePlaying:!1,type:se}),o({isUploadPlaying:!1,type:le}),o({audioSource:"microphone",type:ae}),o({audioStream:t,type:te}),y(t);case 10:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"service-container"},r.a.createElement($,{kind:"info",subtitle:"This system is for demonstration purposes only and is not intended to process Personal Data. No Personal Data is to be entered into this system as it may not have the necessary controls in place to meet the requirements of the General Data Protection Regulation (EU) 2016/679."}),t.error&&r.a.createElement($,{kind:"error",title:t.error.title,subtitle:t.error.description,hideAfterFirstDisplay:!1,timeout:5e3,onCloseButtonClick:function(){return o({error:null,type:re})}}),r.a.createElement(A,{isRecording:t.isRecording,isSamplePlaying:t.isSamplePlaying,isUploadPlaying:t.isUploadPlaying,onError:function(e){o({error:e,type:re})},onSelectNewModel:function(){o({audioDataArray:[],audioDurationInMs:0,type:ne}),o({keywordInfo:[],resultIndex:0,transcript:[],type:ue})},onStartPlayingFileUpload:S,onStopPlayingFileUpload:function(){c(),o({isUploadPlaying:!1,type:le})},onStartPlayingSample:h,onStopPlayingSample:function(){c(),o({isSamplePlaying:!1,type:se})},onStartRecording:w,onStopRecording:function(){c(),o({isRecording:!1,type:ie})}}),r.a.createElement(V,{audioAnalyzer:t.audioAnalyzer,audioDataArray:t.audioDataArray,audioDuration:t.audioDurationInMs,audioSource:t.audioSource,audioWaveContainerRef:i,isTranscribing:t.isTranscribing,keywordInfo:t.keywordInfo,transcriptArray:t.transcript}))},be=function(e){Object(n.useEffect)((function(){var a=document.createElement("script");return a.src=e,a.async=!0,document.body.appendChild(a),function(){document.body.removeChild(a)}}),[e])},Se=function(){return be("https://cdn.jsdelivr.net/gh/watson-developer-cloud/watson-developer-cloud.github.io@master/analytics.js"),r.a.createElement("div",{className:"app-container"},r.a.createElement(l,{description:"Automated SOP Dispensing system for Emergency Responders",title:"Parabuddy"}),r.a.createElement(ge,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(Se,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},63:function(e){e.exports=JSON.parse('[{"name":"en-GB_BroadbandModel","language":"en-GB","url":"https://stream.watsonplatform.net/speech-to-text/api/v1/models/en-GB_BroadbandModel","rate":16000,"filename":"en-GB_Broadband-sample.wav","keywords":"Pulse, Blood Pressure, SPO2, Temperature","supported_features":{"custom_language_model":true,"speaker_labels":false},"description":"GB English (16khz Broadband)"},{"name":"en-GB_NarrowbandModel","language":"en-GB","url":"https://stream.watsonplatform.net/speech-to-text/api/v1/models/en-GB_NarrowbandModel","rate":8000,"filename":"en-GB_Narrowband-sample.wav","keywords":"Pulse, Blood Pressure, SPO2, Temperature","supported_features":{"custom_language_model":true,"speaker_labels":false},"description":"GB English (8khz Narrowband)"},{"name":"zh-CN_BroadbandModel","language":"zh-CN","url":"https://stream.watsonplatform.net/speech-to-text/api/v1/models/zh-CN_BroadbandModel","rate":16000,"filename":"zh-CN_Broadband-sample.wav","keywords":"\u6c83 \u68ee \u662f \u8ba4\u77e5 , \u5927 \u6570\u636e \u5206\u6790 \u80fd\u529b","supported_features":{"custom_language_model":false,"speaker_labels":false},"description":"Mandarin (16khz Broadband)"},{"name":"zh-CN_NarrowbandModel","language":"zh-CN","url":"https://stream.watsonplatform.net/speech-to-text/api/v1/models/zh-CN_NarrowbandModel","rate":8000,"filename":"zh-CN_Narrowband-sample.wav","keywords":"\u516c\u53f8 \u7684 \u652f\u6301 , \u7406\u8d22 \u8ba1\u5212","supported_features":{"custom_language_model":false,"speaker_labels":false},"description":"Mandarin (8khz Narrowband)"}]')}},[[294,1,2]]]);
//# sourceMappingURL=main.faf2b801.chunk.js.map